<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>Sample</title>
        <script src="https://unpkg.com/mqtt@latest/dist/mqtt.min.js" type="text/javascript"></script>
        <script src="https://unpkg.com/mqtt-plus@latest/umd" type="text/javascript"></script>
    </head>
    <body>
        Please watch the console!
    </body>
    <script type="text/javascript">
        const mqtt = MQTT.connect("ws://127.0.0.1:8443", {
            rejectUnauthorized: false,
            username: "example",
            password: "example"
        })
        const mqttp = new MQTTp(mqtt)
        mqtt.on("error",     (err)            => { console.log("ERROR", err) })
        mqtt.on("offline",   ()               => { console.log("OFFLINE") })
        mqtt.on("close",     ()               => { console.log("CLOSE") })
        mqtt.on("reconnect", ()               => { console.log("RECONNECT") })
        mqtt.on("message",   (topic, message) => { console.log("RECEIVED", topic, message.toString()) })
        mqtt.on("connect", () => {
            console.log("CONNECT")
            mqttp.emit("example/sample", "world", 42)
        })
    </script>
</html>
